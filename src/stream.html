<!DOCTYPE html>
<html lang="fi">
  <head>
    <title>Tapahtumasivu | Stream</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Tapahtumasivun stream" />
    <link
      rel="icon"
      type="image/png"
      href="/image/icons/favicon-16x16.png"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/png"
      href="/image/icons/favicon-32x32.png"
      sizes="32x32"
    />
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <link
      href="https://unpkg.com/video.js@7/dist/video-js.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/@videojs/themes@1/dist/fantasy/index.css"
      rel="stylesheet"
    />
    <link href="/styles/output.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
  </head>
  <body class="flex flex-col min-h-screen">
    <nav class="bg-white w-full border-gray-200 px-2 sm:px-4 py-2.5">
      <div
        class="container flex flex-wrap justify-between items-center mx-auto"
      >
        <a href="./index.html" class="flex items-center">
          <span class="self-center text-xl font-semibold whitespace-nowrap"
            >Mahdollisuuksien Maisemia</span
          >
        </a>
        <button
          data-collapse-toggle="navbar-default"
          type="button"
          class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
          aria-controls="navbar-default"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <svg
            class="w-6 h-6"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
        <div class="hidden w-full md:block md:w-auto" id="navbar-default">
          <ul
            class="flex flex-col p-4 mt-4 bg-gray-50 rounded-lg border border-gray-100 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-white"
          >
            <li class="group">
              <a href="/index.html" class="nav-link">Etusivu</a>
              <div
                class="relative -bottom-1 w-0 transition-all h-1 bg-emerald group-hover:w-full"
              ></div>
            </li>
            <li class="group">
              <a href="/schedule.html" class="nav-link">Ohjelma</a>
              <div
                class="relative -bottom-1 w-0 transition-all h-1 bg-emerald group-hover:w-full"
              ></div>
            </li>
            <li class="group">
              <a href="/stream.html" class="nav-link-active" aria-current="page"
                >Stream</a
              >
              <div
                class="relative -bottom-1 w-0 transition-all h-1 bg-emerald group-hover:w-full"
              ></div>
            </li>
            <li class="group">
              <a href="/contact.html" class="nav-link">Yhteystiedot</a>
              <div
                class="relative -bottom-1 w-0 transition-all h-1 bg-emerald group-hover:w-full"
              ></div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div
      class="flex flex-col md:flex-row min-h-[calc(100vh-60px)] md:min-h-[calc(100vh-72px)] w-full"
    >
      <div id="stream" class="bg-black w-full md:w-3/4 min-h-[350px]">
        <video
          id="my-video"
          class="video-js vjs-theme-fantasy vjs-custom-theme w-full h-full"
        >
          <source
            id="striimi"
            src="https://vekotin.norwayeast.cloudapp.azure.com/wowzastriim/playlist.m3u8"
            type="application/x-mpegURL"
          />
          <p class="vjs-no-js">
            To view this video please enable JavaScript, and consider upgrading
            to a web browser that
            <a href="https://videojs.com/html5-video-support/" target="_blank"
              >supports HTML5 video</a
            >
          </p>
        </video>
      </div>

      <div id="chat" class="relative bg-gray-200 md:w-1/4 h-full w-full">
        <div
          id="main-container"
          class="w-full h-full flex flex-col my-auto mx-auto pb-0 px-0 items-center bg-emerald shadow-inner"
          style="
            background: linear-gradient(145deg, #7d82b8, #c1c1c1);
            box-shadow: 3px 1px 7px #989898, 45px 16px 20px #ffffff;
          "
        >
          <div
            id="selectStuffContainer"
            class="w-full flex flex-wrap text-sm border-b solid border-richblack p-2.5"
          >
            <p class="basis-full text-center text-white font-extrabold">CHAT</p>

            <div class="basis-1/2 text-center mb-1 p-1">
              <label for="rooms" class="text-white">ROOM:</label>
              <select
                class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline"
                name="rooms"
                id="rooms"
                onchange="joinRoom(this)"
              >
                <option disabled hidden value selected>Select</option>
                <option value="1" selected>Room 1</option>
                <option value="2">Room 2</option>
                <option value="3">Room 3</option>
              </select>
            </div>

            <div class="basis-1/2 text-center p-1">
              <label for="username" class="text-white text-center"
                >USERNAME:</label
              >
              <input
                type="text"
                id="username"
                placeholder="Username..."
                required="true"
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              />
            </div>
          </div>

          <ul
            id="messages"
            class="info-inside border-none !rounded-none w-full h-full list-none m-0 p-0 max-h-[calc(100vh-50px)!important] overflow-auto bg-white"
          ></ul>

          <form
            id="message-form"
            class="absolute bottom-0 flex flex-row w-full border-t solid border-richblack"
            action="#"
          >
            <input
              id="m"
              class="w-4/5 py-1.5 px-3 border-0"
              autocomplete="off"
              placeholder="Enter message..."
            />
            <input
              type="submit"
              class="w-1/5 bg-emerald text-richblack border-0 border-solid"
              value="Send"
            />
          </form>
        </div>
      </div>
    </div>

    <!-- <footer>
      <div
        class="bg-footer-texture drop-shadow-footer-shadow bg-no-repeat bg-bottom bg-cover w-full flex justify-end items-end min-h-[400px] -mb-1"
      ></div>
      <div
        class="p-4 min-h-[245px] bg-middlepurple sticky z-10 shadow md:flex md:items-center md:justify-between md:p-6"
      >
        <span id="copyright" class="text-sm text-white sm:text-center"
          >Â© 2022 All Rights Reserved.
        </span>
        <div id="socials" class="flex justify-center items-center h-10">
          <div class="w-full h-auto justify-between">
            <a
              href="mailto:kulttuurihyvinvointi@metropolia.fi"
              class="p-5 m-2 h-10 w-10 cursor-pointer border-none bg-[url(/image/icons/icons8-email-64.png)] bg-no-repeat bg-[length:100%]"
            >
            </a>
            <a
              href="https://www.instagram.com/mahdollisuuksienmaisemia/"
              class="p-5 m-2 h-10 w-10 cursor-pointer border-none bg-[url(/image/icons/icons8-instagram-48.png)] bg-no-repeat bg-[length:100%]"
            >
            </a>
            <a
              href="https://twitter.com/m_maisemia"
              class="p-5 m-2 h-10 w-10 cursor-pointer border-none bg-[url(/image/icons/icons8-twitter-circled-48.png)] bg-no-repeat bg-[length:100%]"
            >
            </a>
          </div>
        </div>
      </div>
    </footer> -->

    <script defer>
      let videoplayer = document.querySelector(".video-js");

      const pleijer = videojs(
        videoplayer,
        {
          controls: true,
          autoplay: false,
          preload: "auto",
          poster: "/image/uCM8Mtw.jpeg",
        },
        () => {
          pleijer.on("error", () => {
            console.log("No stream available");

            const errordisp = document.querySelector(".vjs-error-display");
            errordisp.innerHTML = "";
            errordisp.innerHTML += `
            <div id="jotaa2" class="
                              absolute 
                              top-0 
                              z-50 
                              w-full 
                              bg-[#1e242c] 
                              h-[50px]
                              text-center
                              text-white
                              text-sm 
                              sm:text-lg
                              md:text-2xl 
                              flex
                              justify-between 
                              items-center 
                              p-3">
              <p>ðŸ”´ OFFLINE</p> 
              <button id="vodbttn">Watch VOD ðŸ“¼ </button> 
              <button id="reloadbttn">RELOAD âŸ²</button>
            </div>`;

            
            const vodbttn = document.getElementById("vodbttn");
            vodbttn.addEventListener("click", () => {
              event.preventDefault();
              pleijer.pause();
              pleijer.src({
                type: "video/mp4",
                src: "/videos/2022-10-11_22-40-14.mp4",
              });
              pleijer.load();
              pleijer.play();
            });

            const reloadbttn = document.getElementById("reloadbttn");
            reloadbttn.addEventListener("click", () => {
              location.reload();
            });
          });
        }
      );
    </script>
    <script>
      // Hide/show hamburger menu
      let isVisible = false;
      document.querySelector("[data-collapse-toggle=navbar-default]").addEventListener("click", () => {
        isVisible = !isVisible;

        isVisible
        ? document.getElementById("navbar-default").classList.remove("hidden")
        : document.getElementById("navbar-default").classList.add("hidden");
      });
    </script>
    <script defer>
      document.addEventListener("readystatechange", (event) => {
        // When window loaded join first room by default
        if (event.target.readyState === "complete") {
          joinRoom({ value: 1 });
        }
      });
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/chat.js"></script>
  </body>
</html>
